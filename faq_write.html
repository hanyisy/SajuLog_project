<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="resources/img/ui/favicon.png">
        <script src="./resources/js/common.js"></script>
        <link rel="stylesheet" href="resources/css/font.css" type="text/css">
        <link rel="stylesheet" href="resources/css/mainpage.css" type="text/css">
        <link rel="stylesheet" href="resources/css/faq.css">
        <title>문의하기(1:1작성)-사주로그</title>
    </head>

    <body>

        <header></header>
        <section class="sticky_Bottom_Bar js_sticky_Bottom_Bar"> </section>

        <section class="faq">
            <div class="inner">
                <div class="page_menu faq_write_menu">
                    <button class="js_backBtn">
                        <img src="resources/img/product/tab.png" alt="화살표">
                    </button>
                    <h2>1:1문의</h2>
                </div>


                <!-- 탭 컨텐츠 영역 추가 -->
                <div class="faq_contents">


                    <div class="faq_panel active" id="inquiry">
                        <div class="inquiry_write">
                            <h2>1:1문의하기</h2>
                            <form method="post" action="apply.html" id="myModal1" name="page_form">
                                <div class="textarea_wrap">
                                    <textarea name="faq_write" id="js_faq_write" maxlength="300" placeholder="문의사항을 남겨주시면 빠르게 처리해드리겠습니다." required></textarea>
                                    <div class="text_count">
                                        <span id="currentCount">0</span>/300
                                    </div>
                                </div>
                                <button type="submit">제출하기</button>
                            </form>
                        </div>

                    </div>

                </div>


            </div>    
        </section>

        <footer></footer>




        <script>
            document.addEventListener('DOMContentLoaded', () => {

                const tabs = document.querySelectorAll('.faq_tab_box');
                const panels = document.querySelectorAll('.faq_panel');

                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {

                        const target = tab.dataset.tab;

                        // 탭 active
                        tabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');

                        // 패널 active
                        panels.forEach(panel => {
                            panel.classList.remove('active');
                            if (panel.id === target) {
                                panel.classList.add('active');
                            }
                        });

                    });
                });

            });

            

            document.addEventListener('DOMContentLoaded', () => {

                // faq + inquiry 공통 처리
                const accordionBoxes = document.querySelectorAll('.js_faq_box, .js_inquiry_box');

                accordionBoxes.forEach(box => {

                    const top = box.querySelector('.faq_box_top, .inquiry_box_top');

                    top.addEventListener('click', () => {

                        const isActive = box.classList.contains('active');

                        // 같은 그룹 내에서만 닫히게 하려면 부모 기준으로 잡는 게 안전
                        const parent = box.parentElement;
                        parent.querySelectorAll('.js_faq_box, .js_inquiry_box')
                            .forEach(el => el.classList.remove('active'));

                        if (!isActive) {
                            box.classList.add('active');
                        }
                    });
                });

            });

            document.addEventListener('DOMContentLoaded', () => {

                const textarea = document.getElementById('js_faq_write');
                const counter = document.getElementById('currentCount');
                const maxLength = 300;

                textarea.addEventListener('input', () => {

                    let length = textarea.value.length;

                    if (length > maxLength) {
                        textarea.value = textarea.value.substring(0, maxLength);
                        length = maxLength;
                    }

                    counter.textContent = length;
                });

            });

            
            const backBtn = document.querySelector('.js_backBtn');

            if (backBtn) {
                backBtn.addEventListener('click', () => {
                    if (history.length > 1) {
                        history.back();
                    } else {
                        location.href = '/';
                    }
                });
            }



        </script>

    </body>
</html>